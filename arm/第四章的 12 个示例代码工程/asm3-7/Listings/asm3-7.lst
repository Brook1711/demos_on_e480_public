


ARM Macro Assembler    Page 1 


    1 00000000         ; asm3-7.s
    2 00000000                 THUMB                        ; Indicate THUMB co
                                                            de is used
    3 00000000                 PRESERVE8                    ; Indicate the code
                                                             here preserve 
    4 00000000         ; 8 byte stack alignment
    5 00000000                 AREA             |.text|, CODE, READONLY ; Start
                                                             of CODE area
    6 00000000                 IMPORT           |Image$$ER_IROM1$$RO$$Base| 
                                                            ; ROæ®µèµ·å§‹åœ°å€
                                                            
    7 00000000                 IMPORT           |Image$$ER_IROM1$$RO$$Limit| ; 
                                                            ROæ®µæœ«åœ°å€åé
                                                            ¢çš„åœ°å€,å³RWæ®µ
                                                            èµ·å§‹åœ°å€
    8 00000000                 IMPORT           |Image$$RW_IRAM1$$RW$$Base| ; R
                                                            Wæ®µåœ¨RAMé‡Œçš„è¿
                                                            è¡ŒåŒºèµ·å§‹åœ°å€
    9 00000000                 IMPORT           |Image$$RW_IRAM1$$RW$$Limit| ;R
                                                            Wæ®µåœ¨RAMé‡Œçš„è¿
                                                            è¡ŒåŒºæœ«åœ°å€åé
                                                            ¢çš„åœ°å€
   10 00000000                 IMPORT           |Image$$RW_IRAM1$$ZI$$Base| ; Z
                                                            Iæ®µåœ¨RAMé‡Œçš„è¿
                                                            è¡ŒåŒºèµ·å§‹åœ°å€
   11 00000000                 IMPORT           |Image$$RW_IRAM1$$ZI$$Limit| ;Z
                                                            Iæ®µåœ¨RAMé‡Œçš„è¿
                                                            è¡ŒåŒºæœ«åœ°å€åé
                                                            ¢çš„åœ°å€
   12 00000000                 EXPORT           MyMain
   13 00000000         MyMain  FUNCTION
   14 00000000         ; RWæ®µå’ŒZIæ®µåˆå§‹åŒ–ä»£ç ï¼ˆç¬¬14-30è¡Œï¼‰ï¼šå®Œæˆ
                       RWæ®µæ•°æ®çš„æ‹·è´å’ŒZIæ®µçš„æ¸…é›¶
   15 00000000         ; RWæ®µæ•°æ®çš„æ‹·è´ï¼šä»Imageé‡Œçš„åŠ è½½åŒºæ‹·è´åˆ
                       °RAMé‡Œè¿è¡ŒåŒºï¼ˆç¬¬15-23è¡Œï¼‰
   16 00000000 481B            LDR              r0,  =|Image$$ER_IROM1$$RO$$Lim
it|
   17 00000002 491C            LDR              r1,  =|Image$$RW_IRAM1$$RW$$Bas
e|
   18 00000004 4B1C            LDR              r3,  =|Image$$RW_IRAM1$$ZI$$Bas
e|
   19 00000006         Init_RW
   20 00000006 4299            CMP              r1,  r3
   21 00000008 BF3C F850 
              2B04             LDRCC            r2,  [r0], #4
   22 0000000E F841 2B04       STRCC            r2,  [r1], #4
   23 00000012 D3F8            BCC              Init_RW
   24 00000014         ; ZIæ®µæ¸…é›¶ï¼šZIæ®µåœ¨RAMé‡Œçš„è¿è¡ŒåŒºå…¨éƒ¨æ¸…é›¶ï¼
                       ˆç¬¬24-30è¡Œï¼‰
   25 00000014 4919            LDR              r1,  =|Image$$RW_IRAM1$$ZI$$Lim
it|
   26 00000016 F04F 0200       MOV              r2,  #0
   27 0000001A         Init_ZI
   28 0000001A 428B            CMP              r3,  r1
   29 0000001C BF38 F843 
              2B04             STRCC            r2,  [r3],#4
   30 00000022 D3FA            BCC              Init_ZI
   31 00000024         
   32 00000024         ; åŠŸèƒ½ä»£ç ï¼šå°†4ä½åå…­è¿›åˆ¶æ•°è½¬æ¢ä¸ºç›¸åº”çš



ARM Macro Assembler    Page 2 


                       „ASCIIç å­—ç¬¦ä¸²
   33 00000024 4816            LDR              r0,  =Number ; å¾…è½¬æ¢çš„4ä½
                                                            åå…­è¿›åˆ¶æ•°çš„å
                                                            œ°å€
   34 00000026 6801            LDR              r1, [r0]    ; å¾…è½¬æ¢çš„4ä½å
                                                            å…­è¿›åˆ¶æ•°å­˜å…
                                                            ¥r1
   35 00000028 4A16            LDR              r2,  =String ; æŠŠå­˜æ”¾å­—ç¬¦ä
                                                            ¸²çš„é¦–åœ°å€å­˜å…
                                                            ¥r2
   36 0000002A B406            STMFD            SP!,  {r1-r2 } ; æŠŠR1-R2å‹å…¥
                                                            å †æ ˆï¼Œå€’åºå‹å
                                                            …¥(å…ˆR2åR1)
   37 0000002C F7FF FFFE       BL               Hex2String  ; è°ƒç”¨å­ç¨‹åº
   38 00000030 BC06            LDMFD            SP!,  {r1-r2 } ; å‚æ•°å‡ºæ ˆï¼
                                                            ˆé‡Šæ”¾ä¿å­˜R1-R2ç
                                                            š„æ ˆç©ºé—´ï¼‰
   39 00000032         ; æ­¤æ—¶Stringä¸­æ˜¯è½¬æ¢å®Œçš„å­—ç¬¦ä¸²
   40 00000032         deadloop
   41 00000032 E7FE            B                deadloop    ; æ— é™å¾ªç¯
   42 00000034                 ENDFUNC
   43 00000034         
   44 00000034         ; å­ç¨‹åºHex2Stringï¼š4ä½åå…­è¿›åˆ¶æ•°è½¬æ¢ä¸ºå­—ç
                       ¬¦ä¸²
   45 00000034         Hex2String
                               FUNCTION
   46 00000034 B57F            STMFD            SP!,  {r0-r6, LR} ; ä¿æŠ¤ç°åœ
                                                            ºï¼ŒR0-R6, LRå…¥æ ˆ
                                                            
   47 00000036 AE08            ADD              r6,  SP,  #8*4 ; ä½¿R7æŒ‡å‘å‚
                                                            æ•°(è·³è¿‡æ ˆé¡¶çš„
                                                            8ä¸ªå¯„å­˜å™¨)
   48 00000038 F856 0B04       LDR              r0,  [r6], #4 ; å–å‡º å¾…è½¬æ
                                                            ¢çš„4ä½åå…­è¿›åˆ
                                                            ¶æ•° åˆ°R0ï¼ŒR6åŠ 4
                                                            
   49 0000003C 6831            LDR              r1,  [r6]   ; å–å‡º å­˜æ”¾å­—ç
                                                            ¬¦ä¸²4å­—èŠ‚å•å…ƒ 
                                                            çš„é¦–åœ°å€ åˆ°R1
   50 0000003E F101 0103       ADD              r1,  #3     ; ä½¿R1æŒ‡å‘ å­˜æ”
                                                            ¾å­—ç¬¦ä¸²4å­—èŠ‚å
                                                            •å…ƒ çš„æœ€åä¸€ä¸
                                                            ª
   51 00000042 F04F 0204       MOV              r2,  #4     ; å¾ªç¯è®¡æ•°å¯„å­
                                                            ˜å™¨r2èµ‹åˆå€¼ä¸º4
                                                            
   52 00000046         loop
   53 00000046 4603            MOV              r3,  r0     ; å°† å¾…è½¬æ¢çš„4
                                                            ä½åå…­è¿›åˆ¶æ•° 
                                                            å¤åˆ¶åˆ°R3
   54 00000048 F003 030F       AND              r3,  r3,  #0x0F ; å–å‡ºä½4ä½
                                                            
   55 0000004C F7FF FFFE       BL               Hex2ASCII   ; è°ƒç”¨1ä½16è¿›åˆ
                                                            ¶æ•°è½¬æ¢ä¸ºASCIIå
                                                            ­ç¨‹åº
   56 00000050 F801 3901       STRB             r3,  [r1],  #-1 ; ä¿å­˜è½¬æ¢ç
                                                            »“æœASCII
   57 00000054 EA4F 1010       MOV              r0,  r0,  LSR #4 ; R0å³ç§»4ä½
                                                            ï¼Œå‡†å¤‡å¤„ç†ä¸‹ä



ARM Macro Assembler    Page 3 


                                                            ¸€ä¸ª4ä½
   58 00000058 1E52            SUBS             r2, r2, #1  ; å¾ªç¯è®¡æ•°å™¨å‡
                                                            1
   59 0000005A D1F4            BNE              loop        ; å¾ªç¯è®¡æ•°å™¨ä¸
                                                            ç­‰äº0ï¼Œç»§ç»­å¾
                                                            ªç¯
   60 0000005C E8BD 407F       LDMFD            SP!,  {r0-r6, LR} ; æ¢å¤ç°åœ
                                                            ºï¼ŒR0-R6, LRå‡ºæ ˆ
                                                            
   61 00000060 4770            BX               LR          ; å­ç¨‹åºè¿”å›
   62 00000062                 ENDFUNC
   63 00000062         
   64 00000062         ; å­ç¨‹åºHex2ASCIIï¼šæŠŠ1ä½16è¿›åˆ¶æ•°è½¬æ¢ä¸ºASCIIï
                       ¼Œå…¥å£å‚æ•°R3ï¼Œå‡ºå£å‚æ•°R3ã€‚
   65 00000062         Hex2ASCII
                               FUNCTION
   66 00000062 2B09            CMPS             r3, #9      ; åˆ¤æ–­R3æ˜¯å¦å·²
                                                            å¤§äº9
   67 00000064 DD01            BLE              Next        ; ä¸å¤§äº9åˆ™è·³è
                                                            ½¬
   68 00000066 F103 0307       ADD              r3, r3, #7  ; å¤§äº9ï¼Œé¢„å¢7
                                                            
   69 0000006A         Next
   70 0000006A F103 0330       ADD              r3, r3, #'0' 
                                                            ; è½¬æ¢ä¸ºASCIIç 
                                                            
   71 0000006E 4770            BX               LR          ; å­ç¨‹åºè¿”å›
   72 00000070                 ENDFUNC
   73 00000070         
   74 00000070 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         AREA             MyData, DATA, READWRITE ; å£°æ˜
                                                            MyDataæ•°æ®æ®µ
   75 00000000 00008AF5 
                       Number  DCD              0x8AF5      ; å¾…è½¬æ¢çš„4ä½å
                                                            å…­è¿›åˆ¶æ•°
   76 00000004 00 00 00 
              00       String  DCB              0, 0, 0, 0  ; ä¿å­˜å­—ç¬¦ä¸²çš
                                                            „ç©ºé—´
   77 00000008                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\asm3-7.d -o.\objects\asm3-7.o -I.\RTE\_Target_1 -ID:\
Keil_v5\ARM\PACK\Keil\STM32F4xx_DFP\2.13.0\Drivers\CMSIS\Device\ST\STM32F4xx\In
clude -ID:\Keil_v5\ARM\CMSIS\Include --predefine="__UVISION_VERSION SETA 526" -
-predefine="STM32F407xx SETA 1" --list=.\listings\asm3-7.lst asm3-7.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 5 in file asm3-7.s
   Uses
      None
Comment: .text unused
Hex2ASCII 00000062

Symbol: Hex2ASCII
   Definitions
      At line 65 in file asm3-7.s
   Uses
      At line 55 in file asm3-7.s
Comment: Hex2ASCII used once
Hex2String 00000034

Symbol: Hex2String
   Definitions
      At line 45 in file asm3-7.s
   Uses
      At line 37 in file asm3-7.s
Comment: Hex2String used once
Init_RW 00000006

Symbol: Init_RW
   Definitions
      At line 19 in file asm3-7.s
   Uses
      At line 23 in file asm3-7.s
Comment: Init_RW used once
Init_ZI 0000001A

Symbol: Init_ZI
   Definitions
      At line 27 in file asm3-7.s
   Uses
      At line 30 in file asm3-7.s
Comment: Init_ZI used once
MyMain 00000000

Symbol: MyMain
   Definitions
      At line 13 in file asm3-7.s
   Uses
      At line 12 in file asm3-7.s
Comment: MyMain used once
Next 0000006A

Symbol: Next
   Definitions
      At line 69 in file asm3-7.s
   Uses
      At line 67 in file asm3-7.s
Comment: Next used once
deadloop 00000032

Symbol: deadloop



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 40 in file asm3-7.s
   Uses
      At line 41 in file asm3-7.s
Comment: deadloop used once
loop 00000046

Symbol: loop
   Definitions
      At line 52 in file asm3-7.s
   Uses
      At line 59 in file asm3-7.s
Comment: loop used once
9 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

MyData 00000000

Symbol: MyData
   Definitions
      At line 74 in file asm3-7.s
   Uses
      None
Comment: MyData unused
Number 00000000

Symbol: Number
   Definitions
      At line 75 in file asm3-7.s
   Uses
      At line 33 in file asm3-7.s
Comment: Number used once
String 00000004

Symbol: String
   Definitions
      At line 76 in file asm3-7.s
   Uses
      At line 35 in file asm3-7.s
Comment: String used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Image$$ER_IROM1$$RO$$Base 00000000

Symbol: Image$$ER_IROM1$$RO$$Base
   Definitions
      At line 6 in file asm3-7.s
   Uses
      None
Comment: Image$$ER_IROM1$$RO$$Base unused
Image$$ER_IROM1$$RO$$Limit 00000000

Symbol: Image$$ER_IROM1$$RO$$Limit
   Definitions
      At line 7 in file asm3-7.s
   Uses
      At line 16 in file asm3-7.s
Comment: Image$$ER_IROM1$$RO$$Limit used once
Image$$RW_IRAM1$$RW$$Base 00000000

Symbol: Image$$RW_IRAM1$$RW$$Base
   Definitions
      At line 8 in file asm3-7.s
   Uses
      At line 17 in file asm3-7.s
Comment: Image$$RW_IRAM1$$RW$$Base used once
Image$$RW_IRAM1$$RW$$Limit 00000000

Symbol: Image$$RW_IRAM1$$RW$$Limit
   Definitions
      At line 9 in file asm3-7.s
   Uses
      None
Comment: Image$$RW_IRAM1$$RW$$Limit unused
Image$$RW_IRAM1$$ZI$$Base 00000000

Symbol: Image$$RW_IRAM1$$ZI$$Base
   Definitions
      At line 10 in file asm3-7.s
   Uses
      At line 18 in file asm3-7.s
Comment: Image$$RW_IRAM1$$ZI$$Base used once
Image$$RW_IRAM1$$ZI$$Limit 00000000

Symbol: Image$$RW_IRAM1$$ZI$$Limit
   Definitions
      At line 11 in file asm3-7.s
   Uses
      At line 25 in file asm3-7.s
Comment: Image$$RW_IRAM1$$ZI$$Limit used once
6 symbols
353 symbols in table
